# –û—Ç–ª–∞–¥–∫–∞ BigQuery - –ü–æ—á–µ–º—É —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

## –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Cloud Functions

```bash
gcloud functions logs read playTodayBot --gen2 --region=europe-west1 --limit=50
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å: https://console.cloud.google.com/logs?project=play-today-479819

–§–∏–ª—å—Ç—Ä:
```
resource.type="cloud_function"
resource.labels.function_name="playTodayBot"
```

### 2. –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö

–ò—â–∏ —Å—Ç—Ä–æ–∫–∏ —Å:
- `üì¶ Creating dataset` - –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å dataset
- `‚úÖ Dataset created` - dataset —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
- `üìã Creating table` - –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
- `‚úÖ Table created` - —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- `‚úÖ Event saved to BigQuery` - —Å–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- `‚ùå Error saving to BigQuery` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

### 3. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ dataset/—Ç–∞–±–ª–∏—Ü—ã
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏:
```bash
./setup-bigquery-permissions.sh
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Dataset –Ω–µ —Å–æ–∑–¥–∞–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Å—å —á—Ç–æ dataset —Å–æ–∑–¥–∞–Ω –≤ `europe-west1`:
1. –û—Ç–∫—Ä–æ–π BigQuery Console
2. –í—ã–±–µ—Ä–∏ –ª–æ–∫–∞—Ü–∏—é `europe-west1 (Belgium)`
3. –ü—Ä–æ–≤–µ—Ä—å, –µ—Å—Ç—å –ª–∏ dataset `telegram_bot_analytics`

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL (—Å–º. `create-table-manually.sql`)

### 4. –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ - —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, —Å–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –≤—Ä—É—á–Ω—É—é:

1. –û—Ç–∫—Ä–æ–π BigQuery Console: https://console.cloud.google.com/bigquery?project=play-today-479819
2. –í—ã–±–µ—Ä–∏ –ª–æ–∫–∞—Ü–∏—é `europe-west1 (Belgium)`
3. –í—ã–ø–æ–ª–Ω–∏ SQL –∏–∑ —Ñ–∞–π–ª–∞ `create-table-manually.sql`

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é, —Å–æ–±—ã—Ç–∏—è –Ω–∞—á–Ω—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

